<?php

/*
init script must
- create app folder and copy files
- put the public folder and copy files
- put the templates folder and copy files
- put the .env file
*/

$DS = (strtoupper(substr(PHP_OS, 0, 3)) === 'WIN')?'\\':'/';

$files = [
    'app' => [
        'QWRtaW5HdWFyZC5waHA=$YXBwL0F1dGg=$PD9waHAgDQoNCm5hbWVzcGFjZSBBcHBcQXV0aDsNCg0KdXNlIEphbnNzZW5cSGVscGVyc1xHdWFyZDsNCnVzZSBKYW5zc2VuXEVuZ2luZVxSZXF1ZXN0Ow0KDQpjbGFzcyBBZG1pbkd1YXJkIGV4dGVuZHMgR3VhcmQNCnsNCg0KICAgIC8qKg0KICAgICAqIE1ha2UgdGhlIGF1dGhlbnRpY2F0aW9uIG9mIGEgdXNlciB0aHJvdWdoIHRoZSBBZG1pbiBHdWFyZC4NCiAgICAgKiBUaGlzIHdpbGwgZ3JhbnQgYSByZXF1ZXN0IGNvbWVzIGZyb20gYSB1c2VyIHRoYXQgaXMgaW4gdGhlIA0KICAgICAqIGxpc3QgdGhhdCBjYW4gYWNjZXNzIHRoZSByZXNvdXJjZSBtYW5hZ2VkIGJ5IEFkbWluDQogICAgICoNCiAgICAgKiBAcGFyYW0gUmVxdWVzdCAkcmVxdWVzdA0KICAgICAqIEByZXR1cm4gdm9pZA0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBhdXRoZW50aWNhdGUoUmVxdWVzdCAkcmVxdWVzdCkNCiAgICB7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEF1dGhvcml6ZSBhbiBhY3Rpb24gdGhhdCBtdXN0IGNvbWUgZnJvbSBhbiBhdXRoZW50aWNhdGVkIHVzZXINCiAgICAgKiBhcyB0aGUgcm91dGUgc2hvdWxkIGJlIHByb3RlY3RlZCB3aXRoIHRoaXMgZ3VhcmQNCiAgICAgKg0KICAgICAqIEBwYXJhbSBSZXF1ZXN0ICRyZXF1ZXN0DQogICAgICogQHJldHVybiB2b2lkDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIGF1dGhvcml6ZShSZXF1ZXN0ICRyZXF1ZXN0KQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KICAgIA0KfQ==',
        'ZW5naW5lLnBocA==$YXBwL0NvbmZpZw==$PD9waHANCg0KcmV0dXJuIFsNCiAgICAncHJlcHJvY2Vzc29ycycgPT4gWw0KICAgICAgICAnXEFwcFxQcmVwcm9jZXNzb3JcTWFpbnRlbmFuY2UnLA0KICAgICAgICBbJ1xBcHBcUHJlcHJvY2Vzc29yXERlY3J5cHRSb3V0ZScsICdQT1NUJ10sDQogICAgICAgICdcQXBwXFByZXByb2Nlc3NvclxBY2Nlc3NDb250cm9sJywNCiAgICBdLA0KDQogICAgJ3Bvc3Rwcm9jZXNzb3JzJyA9PiBbICAgICAgDQogICAgXSwNCiAgDQogICAgJ2Fzc2V0cycgPT4gWw0KICAgICAgICAnY3NzJyA9PiAnYXNzZXRzL2Nzcy8nLA0KICAgICAgICAnanMnID0+ICdhc3NldHMvanMvJywNCiAgICAgICAgJ2ltZycgPT4gJ2Fzc2V0cy9pbWFnZXMvJywNCiAgICAgICAgJ2ZvbnRzJyA9PiAnYXNzZXRzL2ZvbnQvJywNCiAgICAgICAgJ3ZlbmRvcicgPT4gJ2Fzc2V0cy92ZW5kb3JzLycNCiAgICBdLA0KDQogICAgLyogYmFzZSB1cmwgdG8gdGhlIHdlYnNpdGUsIGl0IHdpbGwgYmUgZ2F0aGVyZWQgZnJvbSAuZW52IGJ1dCBpbiBwcm9kdWN0aW9uIHRoaXMNCiAgICB2YXJpYWJsZSBtdXN0IGJlIHNldCB0byBmaW5hbCB1cmwgKi8NCiAgICAndXJsJyA9PiBnZXRlbnYoJ1VSTCcpLA0KDQogICAgLyogbWFuYWdlZCB3ZWJzaXRlIHBhdGg6IGlmIHRoaXMgYXBwIGlzIGFuZCBtYW5hZ2VyIGZvciBhbm90aGVyIHdlYnNpdGUgYW5kIHlvdQ0KICAgIHRoaW5rIHlvdSdsbCBuZWVkIGl0cyBVUkwsIHB1dCBpdCBoZXJlICovIA0KICAgIC8qICd3ZWJzaXRlX3BhdGgnID0+IGdldGVudignd2Vic2l0ZV9wYXRoJywgJy92YXIvd3d3L2h0bWwvbXlfb3RoZXJfd2Vic2l0ZS8nKSwgKi8NCiANCiAgICAvKiBtYW5hZ2VkIHdlYnNpdGUgYXNzZXRzIHBhdGggKi8NCiAgICAnd2Vic2l0ZV9hc3NldHMnID0+IFsNCiAgICAgICAgJ2NzcycgPT4gJ2Nzcy8nLA0KICAgICAgICAnanMnID0+ICdqcy8nLA0KICAgICAgICAnaW1nJyA9PiAnaW1hZ2VzLycsDQogICAgXSwNCg0KICAgIC8qKg0KICAgICAqIERhdGFiYXNlIGNvbm5lY3Rpb25zDQogICAgICogYXBwIHdpbGwgdXNlIGRhdGFiYXNlIGNvbm5lY3Rpb24uIFB1dCBmYWxzZSBvciByZW1vdmUgdG8gbm90IA0KICAgICAqIHVzZSBhbnkgZGF0YWJhc2UgY29ubmVjdGlvbi4gWW91IGNhbiBhbHNvIGluZGljYXRlIHBzci00IHJvdXRlDQogICAgICogdG8geW91ciBvd24gaW1wbGVtZW50YXRpb24gb2YgQWRhcHRvciBpZiBub3QgbXlzcWxpIG9yIHBvc3RncmVzIA0KICAgICAqLw0KICAgICdjb25uZWN0aW9ucycgPT4gWw0KICAgICAgICAnbXlkYicgPT4gWw0KICAgICAgICAgICAgJ2RyaXZlcicgPT4gZ2V0ZW52KCdEQl9EUklWRVInKSwNCiAgICAgICAgICAgICdwb3J0JyA9PiBnZXRlbnYoJ0RCX1BPUlQnKSwNCiAgICAgICAgICAgICdob3N0JyA9PiBnZXRlbnYoJ0RCX0hPU1QnKSwNCiAgICAgICAgICAgICd1c2VyJyA9PiBnZXRlbnYoJ0RCX1VTRVInKSwNCiAgICAgICAgICAgICdwd2QnID0+IGdldGVudignREJfUEFTUycpLA0KICAgICAgICAgICAgJ2RiJyA9PiBnZXRlbnYoJ0RCX0RCJyksDQogICAgICAgIF0NCiAgICBdLA0KICAgIC8qKg0KICAgICAqIERlZmF1bHQgY29ubmVjdGlvbiB3aGVuIG5vIHNwZWNpZmllZCAoYWxzbyB1c2VkIGZvciBzdGFydCkNCiAgICAgKi8NCiAgICAnZGVmYXVsdF9jb25uZWN0aW9uJyA9PiAnbXlkYicsDQoNCiAgICAvKioNCiAgICAgKiBHdWFyZHMgYXJlIHRoZSBpbnN0YW5jZXMgdGhhdCBhdXRoZW50aWNhdGUgb3IgYXV0aG9yaXplDQogICAgICogYSByZXF1ZXN0DQogICAgICovDQogICAgJ2d1YXJkcycgPT4gWw0KICAgICAgICdhZG1pbicsDQogICAgICAgJ2FwaScNCiAgICBdLA0KDQogICAgLyoqDQogICAgICogRGVmYXVsdCBndWFyZCB3aGVuIGNvbnRyb2xsZXIgZG9lc24ndCBkZXNpZ25hdGUgb25lDQogICAgICovDQogICAgJ2RlZmF1bHRfZ3VhcmQnID0+ICdhZG1pbicsDQoNCiAgICAvKioNCiAgICAgKiBBdXRoZW50aWNhdGlvbiBpcyB0aGUgbWV0aG9kIHRvIHZlcmlmeSBhbiBpZGVudGl0eS4gDQogICAgICogRWFjaCBndWFyZCBtdXN0IGltcGxlbWVudCBpdHMgb3duIHdheSB0byBtYWtlIGF1dGhlbnRpY2F0aW9uLg0KICAgICAqIElmIG5vdCBtZXRob2QgaXMgZm91bmQgdGhlIHJlcXVlc3Qgd2lsbCBiZSBkZW5pZWQgYnkgZGVmYXVsdA0KICAgICAqLw0KICAgICdhdXRoZW50aWNhdGlvbicgPT4gWw0KICAgICAgICAnYWRtaW4nLA0KICAgICAgICAnYXBpJw0KICAgIF0sDQoNCiAgICAvKioNCiAgICAgKiBBdXRvcml6YXRpb24gaXMgdGhlIG1ldGhvZCB0byBjaGVjayBpZiB1c2VyIGNhbiBhY2Nlc3MNCiAgICAgKiBhIHJlc291cmNlLg0KICAgICAqLyAgICANCiAgICAnYXV0b3JpemF0aW9uJyA9PiBbDQogICAgICAgICdhZG1pbicgPT4gWw0KICAgICAgICAgICAgJ21ldGhvZCcgPT4gJ3Nlc3Npb24nLA0KICAgICAgICAgICAgJ2xvb2tfZm9yJyA9PiBbJ2lzX2FkbWluJywgdHJ1ZV0NCiAgICAgICAgICAgIF0NCiAgICBdLA0KXTsNCg==',
        'ZnVuY3Rpb25zLnBocA==$YXBwL0NvbmZpZw==$PD9waHAgDQovKioNCiAqIFRoZSBwdXJwb3NlIG9mIHRoaXMgZmlsZSBpcyB0byBtYWtlIGdsb2JhbCBmdW5jdGlvbnMNCiAqIHRvIGJlIGNhbGxlZCB3aXRob3V0IHdyaXRpbmcgZW50aXJlIG5hbWVzcGFjZXMgb3IgbWFraW5nDQogKiBpbnZvY2F0aW9ucy4gVGhpcyBpcyB2ZXJ5IHVzZWZ1bCB0byBmdW5jdGlvbnMgdGhhciBhcmUNCiAqIGhlbHBlcnMgYW5kIGdldHRlcnMgb2YgZGF0YSB0aGF0IGFyZSB1c2VkIHZlcnkgb2Z0ZW4uDQogKiANCiAqIFRoZSBnbG9iYWwgY29uc3RydWN0b3Igd2lsbCB0YWtlIGNhcmUgb2YgeW91ciBjYWxsLCBkZXRlcm1pbmluZw0KICogaWYgeW91ciBtZXRob2QgaXMgc3RhdGljIG9yIG5vdCBhbmQgcmV0cmlldmluZyB0aGUNCiAqIHBhcmFtZXRlcnMgbmVlZGVkLiBJdCB3aWxsIG1ha2UgdGhlIGZ1bmN0aW9uIG9uIHRoZSBmbHkNCiAqIGZvciB5b3UuDQogKiANCiAqIEZvciBzZWN1cml0eSByZWFzb25zIHdlJ2xsIG5vdCBhbGxvdyB0aGUgcmVnaXN0cmF0aW9uDQogKiBvZiBjYWxsYmFjayBmdW5jdGlvbnMgaGVyZS4gQWxsIGNhbGxzIG11c3QgZ28gdG8gYSBtZXRob2QNCiAqIGluIGEgbmFtZXNwYWNlZCBjbGFzcy4NCiAqIA0KICovDQoNCnJldHVybiBbDQogICAgJ2FwcF9wYXRoJyA9PiAnXEphbnNzZW5cQXBwQGFwcFBhdGgnLA0KICAgICd1cmwnID0+ICdcSmFuc3NlblxBcHBAdXJsJywNCiAgICAnYXNzZXRzJyA9PiAnXEphbnNzZW5cQXBwQGFzc2V0cycsDQogICAgDQogICAgJ2ZpbGUnID0+ICdcSmFuc3NlblxBcHBAZmlsZVJlc3BvbnNlJywNCiAgICAnZXJyb3InID0+ICdcSmFuc3NlblxBcHBAZXJyb3JSZXNwb25zZScsDQogICAgJ3JlZGlyZWN0JyA9PiAnXEphbnNzZW5cQXBwQHJlZGlyZWN0UmVzcG9uc2UnLA0KDQogICAgJ3JlcXVlc3QnID0+ICdcSmFuc3NlblxBcHBAZ2V0UmVxdWVzdCcsDQogICAgDQogICAgJ2VuZ2luZV9jb25maWcnID0+ICdcSmFuc3NlblxBcHBAZ2V0Q29uZmlnJywNCiAgICAnY3VycmVudF9oZWFkZXInID0+ICdcSmFuc3NlblxBcHBAZ2V0Q3VycmVudEhlYWRlcicsDQoNCiAgICAvKg0KICAgICd3ZWJzaXRlX2Fzc2V0cycgPT4gJ1xBcHBcQ29udHJvbGxlclxXZWJzaXRlQ29udHJvbGxlckB3ZWJzaXRlQXNzZXRzJywNCiAgICAnd2Vic2l0ZV9wYXRoJyA9PiAnXEFwcFxDb250cm9sbGVyXFdlYnNpdGVDb250cm9sbGVyQHdlYnNpdGVQYXRoJywNCiAgICAqLw0KDQogICAgXTs=',
        'cm91dGVzLnBocA==$YXBwL0NvbmZpZw==$PD9waHAgDQoNCi8qKg0KICogDQogKiBGaWxsIHRoZSBhcnJheSB3aXRoIHJvdXRlLCBkZXN0aW5hdGlvbiB0aGF0IHdpbGwgYmUgcHJvY2Vzc2VkIGFuZCBvcHRpb25hbGx5IHBhcmFtcw0KICogDQogKiBUSElTIElTIE9OTFkgRk9SIEdFVCBSRVFVRVNUUw0KICogDQogKiBBcnJheSBNVVNUIEJFOg0KICogUmVnZXh8bGl0ZXJhbDogdGhpcyB3aWxsIGJlIGNvbXBhcmVkIHRvIHJlcXVlc3QgYW5kIGZpcnN0IG1hdGNoIHdpbGwgYmUgcmV0dXJuZWQNCiAqIENvbnRyb2xsZXJ8VGVtcGxhdGVfZmlsZTogVGhpcyB3aWxsIHByb2Nlc3MgdGhlIHJlcXVlc3QsIGlmIGEgY29udHJvbGxlciBpcyBwYXNzZWQgaXQNCiAqIHdpbGwgYmUgaW52b2tlZCwgaWYgYSBmaWxlIGlzIHBhc3NlZCB0aGUgcGF0aCB3aWxsIGJlIHNlYXJjaGVkIGluIHRlbXBsYXRlcyBmb2xkZXIsIGxvYWRlZA0KICogYW5kIHJldHVybmVkLg0KICogUGFyYW1ldGVyOiBJZiB5b3VyIHJlZ2V4IGhhcyBjYXB0dXJlIHZhcmlhYmxlcywgdGhpcyB3aWxsIGJlIG5hbWVkIHdpdGggdGhpcyBsaXRlcmFscw0KICogYW5kIHBhc3NlZCB0byBjb250cm9sbGVyIChpcyB1c2VkKSBvciBzYXZlZCBpbiBSZXF1ZXN0IHBhcmFtZXRlcnMgdG8gYmUgdXNlZCBpbiB5b3VyDQogKiBhcHAgbm9ybWFsbHkuIFRoaXMgcGFyYW1ldGVycyBhcmUgcHJvY2Vzc2VkIGluIG9yZGVyIGFuZCBQT1NUIG92ZXJ3cml0ZSBHRVQgcGFyYW1ldGVycy4NCiAqIA0KICoqLyANCg0KcmV0dXJuIFsNCg0KICAgICAgICBbJ3BhdGgnID0+ICcvZHluanMvbG9naW4nLCANCiAgICAgICAgJ3Jlc29sdmVyJyA9PiAnXEFwcFxDb250cm9sbGVyXFNjcmlwdENvbnRyb2xsZXJAZ2V0TG9naW5TY3JpcHQnLCANCiAgICAgICAgJ2d1YXJkJyA9PiAnbm9ib2R5J10sIA0KICAgICAgICANCiAgICAgICAgWydwYXRoJyA9PicvJywgDQogICAgICAgICdyZXNvbHZlcicgPT4gJ3dlbGNvbWUucGhwJywgDQogICAgICAgICdndWFyZCcgPT4gJ25vYm9keSddLA0KICAgIA0KXTs=',
        'SG9tZUNvbnRyb2xsZXIucGhw$YXBwL0NvbnRyb2xsZXI=$PD9waHAgDQoNCm5hbWVzcGFjZSBBcHBcQ29udHJvbGxlcjsNCg0KdXNlIEphbnNzZW5cRW5naW5lXENvbnRyb2xsZXI7DQp1c2UgSmFuc3NlblxFbmdpbmVcUmVxdWVzdDsNCg0KY2xhc3MgSG9tZUNvbnRyb2xsZXIgZXh0ZW5kcyBDb250cm9sbGVyDQp7DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gd2VsY29tZSgpDQogICAgew0KICAgICAgICByZXR1cm4gIkhlbGxvIHVzZXIhIjsNCiAgICB9DQoNCn0=',
        'QWNjZXNzQ29udHJvbC5waHA=$YXBwL1ByZXByb2Nlc3Nvcg==$PD9waHAgDQoNCm5hbWVzcGFjZSBBcHBcUHJlcHJvY2Vzc29yOw0KDQovL3VzZSBKYW5zc2VuXEVuZ2luZVxGYWN0b3J5Ow0KdXNlIEphbnNzZW5cRW5naW5lXFByZXByb2Nlc3NvcjsNCnVzZSBKYW5zc2VuXEVuZ2luZVxSZXF1ZXN0Ow0KdXNlIEphbnNzZW5cRW5naW5lXFJvdXRlOw0KdXNlIEphbnNzZW5cSGVscGVyc1xFeGNlcHRpb247DQp1c2UgSmFuc3NlblxIZWxwZXJzXEd1YXJkOw0KdXNlIEphbnNzZW5cSGVscGVyc1xSZXNwb25zZVxFcnJvclJlc3BvbnNlOw0KdXNlIEphbnNzZW5cSGVscGVyc1xBdXRoOw0KDQpjbGFzcyBBY2Nlc3NDb250cm9sIGV4dGVuZHMgUHJlcHJvY2Vzc29yDQp7DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gaGFuZGxlKFJlcXVlc3QgJHJlcXVlc3QpDQogICAgew0KICAgICAgICAvLyBpZiByZXF1ZXN0IG1ldGhvZCBpcyBnZXQgd2UgZmluZCBmb3IgYSBhdXRob3JpemF0aW9uIGluIGd1YXJkDQogICAgICAgIC8vIGlmIHBvc3Qgd2UgY2hlY2sgdGhlIHZhbGlkYXRvciB0byBjaGVjayB3aGF0IGd1YXJkcyBhcmUgZW5hYmxlZA0KICAgICAgICAkcm0gPSAkcmVxdWVzdC0+bWV0aG9kKCk7DQogICAgICAgIGlmKCRybSA9PSAnR0VUJyl7DQogICAgICAgICAgICAkcGF0aCA9ICRyZXF1ZXN0LT5nZXRQYXRoKCk7DQogICAgICAgICAgICAkcm91dGUgPSBSb3V0ZTo6Z2V0QnlQYXRoKCRwYXRoKTsNCiAgICAgICAgICAgICRndWFyZCA9IGVtcHR5KCRyb3V0ZVsnZ3VhcmQnXSk/ZW5naW5lX2NvbmZpZygnZGVmYXVsdF9ndWFyZCcpOiRyb3V0ZVsnZ3VhcmQnXTsNCiAgICAgICAgICAgIGlmKCRndWFyZCAhPT0gJ25vYm9keScpew0KICAgICAgICAgICAgICAgIHJldHVybiBBdXRoOjpndWFyZCgkZ3VhcmQpLT5hdXRob3JpemUoJHJlcXVlc3QpOw0KICAgICAgICAgICAgfWVsc2UNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCg0KICAgICAgICB9ZWxzZWlmIChpbl9hcnJheSgkcm0sIFsnUE9TVCcsJ1BVVCcsJ0RFTEVURSddKSl7DQogICAgICAgICAgICAkdWEgPSAkcmVxdWVzdC0+Z2V0VXNlckFjdGlvbigpOw0KICAgICAgICAgICAgJHZfbmFtZSA9ICdcQXBwXFZhbGlkYXRvclxcJyAuIHRyYW5zZm9ybV90b19jbGFzc19uYW1lKCR1YVsnY29udHJvbGxlciddKSAuICdWYWxpZGF0b3InOw0KICAgICAgICAgICAgJHYgPSBuZXcgJHZfbmFtZTsNCiAgICAgICAgICAgICRndWFyZCA9IEd1YXJkOjpyZXNvbHZlKCR2LT5ndWFyZCk7DQogICAgICAgICAgICAvLyBhcyBndWFyZHMgYXV0aG9yaXplIHRoZSBhY2Nlc3MsIHdpdGggb25seSBvbmUgdGhhdCBhbGxvd3MgdGhlIGFjdGlvbg0KICAgICAgICAgICAgLy8gaXQgd2lsbCBiZSBhbGxvd2VkDQogICAgICAgICAgICAkYXV0aG9yaXplZCA9IGZhbHNlIHx8ICR2LT5ndWFyZCA9PSAnbm9ib2R5JzsNCiAgICAgICAgICAgIGZvcmVhY2goJGd1YXJkIGFzICRnKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICRhdXRob3JpemVkID0gJGctPmF1dGhvcml6ZSgkcmVxdWVzdCk7DQogICAgICAgICAgICAgICAgaWYoJGF1dGhvcml6ZWQpDQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYoISRhdXRob3JpemVkKQ0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3JSZXNwb25zZSgnUmVxdWVzdCBub3QgYWxsb3dlZCcsIDQwMyk7DQoNCiAgICAgICAgfWVsc2UNCiAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ1JlcXVlc3Qgbm90IGFjY2VwdGFibGUnLCA0MDYpOw0KICAgICAgICANCiAgICAgICAgLy8gdGhpcyBmdW5jdGlvbiBtdXN0IHJldHVybiBhIGJvb2xlYW4NCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgcHVibGljIGZ1bmN0aW9uIGhhbmRsZUVycm9yKCkNCiAgICB7DQogICAgICAgIHJldHVybiByZWRpcmVjdCgnbG9naW4nKS0+d2l0aERhdGEoWydlcnJvcicgPT4gJ1lvdXIgc2Vzc2lvbiBoYXMgZW5kZWQuIExvZ2luIGFnYWluJ10pOw0KICAgIH0NCg0KfQ==',
        'RGVjcnlwdFJvdXRlLnBocA==$YXBwL1ByZXByb2Nlc3Nvcg==$PD9waHAgDQoNCm5hbWVzcGFjZSBBcHBcUHJlcHJvY2Vzc29yOw0KDQp1c2UgSmFuc3NlblxFbmdpbmVcUHJlcHJvY2Vzc29yOw0KdXNlIEphbnNzZW5cRW5naW5lXFJvdXRlOw0KdXNlIEphbnNzZW5cRW5naW5lXFJlcXVlc3Q7DQp1c2UgSmFuc3NlblxIZWxwZXJzXEV4Y2VwdGlvbjsNCg0KDQpjbGFzcyBEZWNyeXB0Um91dGUgZXh0ZW5kcyBQcmVwcm9jZXNzb3INCnsNCg0KICAgIHB1YmxpYyBmdW5jdGlvbiBoYW5kbGUoUmVxdWVzdCAkcmVxdWVzdCkNCiAgICB7DQogICAgICAgICRyZXF1ZXN0ID0gbmV3IFJlcXVlc3Q7DQogICAgICAgIC8vIGdldCB0aGUgZnVsbCBwYXRoIGFuZCBleHRyYWN0IHRoZSBwYXlsb2FkIHRvIGdldCB0aGUgcm91dGUNCiAgICAgICAgJHBheWxvYWQgPSAkcmVxdWVzdC0+Z2V0UXVlcnlTdHJpbmdQYXlsb2FkKCk7DQogICAgICAgIGlmICghJHBheWxvYWQpIHsNCiAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ0ludmFsaWQgcmVxdWVzdCcsIDQwMCk7DQogICAgICAgIH0NCiAgICAgICAgLy8gZGVjaXBoZXIgcm91dGUNCiAgICAgICAgJHJvdXRlID0gUm91dGU6OmRlY3J5cHQoJHBheWxvYWQpOw0KICAgICAgICAvLyBsb2FkIHRoZSBjb3JyZWN0IGNvbnRyb2xsZXINCiAgICAgICAgJGEgPSBleHBsb2RlKCcvJywgJHJvdXRlKTsNCiAgICAgICAgaWYgKCFpc19hcnJheSgkYSkpIHsNCiAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ0ludmFsaWQgcmVxdWVzdCcsIDQwMCk7DQogICAgICAgIH0NCiAgICAgICAgLy8gc2F2ZSB0aGUgcGF0aCB0byBSZXF1ZXN0IG9iamVjdA0KICAgICAgICAkcmVxdWVzdC0+c2V0VXNlckFjdGlvbigkYVswXSwgJGFbMV0pOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gaGFuZGxlRXJyb3IoKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KfQ==',
        'TWFpbnRlbmFuY2UucGhw$YXBwL1ByZXByb2Nlc3Nvcg==$PD9waHAgDQoNCm5hbWVzcGFjZSBBcHBcUHJlcHJvY2Vzc29yOw0KDQp1c2UgSmFuc3NlblxFbmdpbmVcUHJlcHJvY2Vzc29yOw0KdXNlIEphbnNzZW5cRW5naW5lXFJlcXVlc3Q7DQoNCg0KY2xhc3MgTWFpbnRlbmFuY2UgZXh0ZW5kcyBQcmVwcm9jZXNzb3INCnsNCg0KICAgIHB1YmxpYyBmdW5jdGlvbiBoYW5kbGUoUmVxdWVzdCAkcmVxdWVzdCkNCiAgICB7DQogICAgICAgIGlmKGdldGVudignbWFpbnRlbmFuY2UnKSA9PSAndHJ1ZScpew0KICAgICAgICAgICAgLy8gbWFrZSBhIHJlc3BvbnNlIHRvIGhhbmRsZSB0aGUgbWFpbnRlbmFuY2UNCiAgICAgICAgICAgICRyID0gbmV3IFxKYW5zc2VuXEhlbHBlcnNcUmVzcG9uc2VcUmF3UmVzcG9uc2U7DQogICAgICAgICAgICAkci0+c2V0Q29udGVudCgnRXN0YW1vcyBlbiBtYW50ZW5pbWllbnRvIScpOw0KICAgICAgICAgICAgcmV0dXJuICRyOw0KICAgICAgICB9ZWxzZQ0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgcHVibGljIGZ1bmN0aW9uIGhhbmRsZUVycm9yKCkNCiAgICB7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCn0=',
        'U2Vzc2lvblRpbWVvdXQucGhw$YXBwL1ByZXByb2Nlc3Nvcg==$PD9waHAgDQoNCm5hbWVzcGFjZSBBcHBcUHJlcHJvY2Vzc29yOw0KDQp1c2UgSmFuc3NlblxFbmdpbmVcUHJlcHJvY2Vzc29yOw0KdXNlIEphbnNzZW5cRW5naW5lXFJlcXVlc3Q7DQoNCmNsYXNzIFNlc3Npb25UaW1lb3V0IGV4dGVuZHMgUHJlcHJvY2Vzc29yDQp7DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gaGFuZGxlKFJlcXVlc3QgJHJlcXVlc3QpDQogICAgew0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gaGFuZGxlRXJyb3IoKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KfQ==',
    ],
    'public' => [
        'Lmh0YWNjZXNz$cHVibGljLw==$PElmTW9kdWxlIG1vZF9yZXdyaXRlLmM+DQogICAgPElmTW9kdWxlIG1vZF9uZWdvdGlhdGlvbi5jPg0KICAgICAgICBPcHRpb25zIC1NdWx0aVZpZXdzDQogICAgPC9JZk1vZHVsZT4NCg0KICAgIFJld3JpdGVFbmdpbmUgT24NCiAgDQogICAgIyBSZWRpcmVjdCBUcmFpbGluZyBTbGFzaGVzIElmIE5vdCBBIEZvbGRlci4uLg0KICAgICMgUmV3cml0ZUNvbmQgJXtSRVFVRVNUX0ZJTEVOQU1FfSAhLWQNCiAgICAjIFJld3JpdGVSdWxlIF4oLiopLyQgLyQxIFtMLFI9MzAxXQ0KDQogICAgIyBIYW5kbGUgRnJvbnQgQ29udHJvbGxlci4uLg0KICAgIFJld3JpdGVDb25kICV7UkVRVUVTVF9VUkl9ICEoXC4oY3NzfGpzfG1hcHxzdmd8aWNvfHdvZmZ8d29mZjJ8dHRmKSQpDQogICAgUmV3cml0ZUNvbmQgJXtSRVFVRVNUX0ZJTEVOQU1FfSAhLWQNCiAgICBSZXdyaXRlQ29uZCAle1JFUVVFU1RfRklMRU5BTUV9ICEtZg0KICAgIFJld3JpdGVSdWxlIF4gaW5kZXgucGhwIFtMXQ0KDQogICAgIyBIYW5kbGUgQXV0aG9yaXphdGlvbiBIZWFkZXINCiAgICBSZXdyaXRlQ29uZCAle0hUVFA6QXV0aG9yaXphdGlvbn0gLg0KICAgIFJld3JpdGVSdWxlIC4qIC0gW0U9SFRUUF9BVVRIT1JJWkFUSU9OOiV7SFRUUDpBdXRob3JpemF0aW9ufV0NCjwvSWZNb2R1bGU+DQo=',
        'aW5kZXgucGhw$cHVibGljLw==$PD9waHAgDQoNCnJlcXVpcmVfb25jZSAoJy4uL3ZlbmRvci9hdXRvbG9hZC5waHAnKTsNCg0KLyoqDQogKiAtLSBBcHBsaWNhdGlvbiBsaWZlY3ljbGUgLS0NCiAqIFRha2UgcmVxdWVzdCAoR0VUfFBPU1R8UFVUfERFTEVURSkgDQogKiBQcmVwcm9jZXNzDQogKiBGaW5kIHRoZSByaWdodCBoYW5kbGVyIA0KICogSGFuZGxlIHJlcXVlc3QNCiAqIE1ha2UgcmVzcG9uc2UgDQogKiBQb3N0cHJvY2Vzcw0KICogRWNobyByZXNwb25zZQ0KICogDQogKi8NCg0KLy8gSW5zdGFudGlhdGUgb3VyIGFwcA0KJGphbmFwcCA9IG5ldyBKYW5zc2VuXEFwcCgpOw0KDQovLyBJbml0IHRoZSBhcHAgYW5kIGxvYWQgY29uZmlndXJhdGlvbnMNCiRqYW5hcHAtPmluaXQoX19ESVJfXyk7DQoNCi8vIHJ1biENCmVjaG8gJGphbmFwcC0+cnVuKCk7',

    ],
    'templates' => [
        'd2VsY29tZS5waHA=$dGVtcGxhdGVzLw==$PD9waHAgDQoNCiRsb2JzdGVyID0gSmFuc3NlblxSZXNvdXJjZVxFbWJlZEZvbnRzOjokbG9ic3RlcjsNCg0KPz4NCjxodG1sPg0KPHRpdGxlPldlbGNvbWUgdG8gSmFuc3NlbiE8L3RpdGxlPg0KPHN0eWxlPg0KICAgIEBmb250LWZhY2Ugew0KICAgICAgICBmb250LWZhbWlseTogJ0xvYnN0ZXInOw0KICAgICAgICBzcmM6IHVybChkYXRhOmZvbnQvdHJ1ZXR5cGU7Y2hhcnNldD11dGYtODtiYXNlNjQsPD89ICRsb2JzdGVyID8+KSBmb3JtYXQoJ3RydWV0eXBlJyk7DQogICAgICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7DQogICAgICAgIGZvbnQtc3R5bGU6IG5vcm1hbDsNCiAgICB9DQoNCiAgICAuY29udGFpbmVyIHsNCiAgICAgICAgbWluLWhlaWdodDogMTBlbTsNCiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgICAgICBoZWlnaHQ6IDkzJTsNCiAgICB9DQoNCiAgICAubmFtZSB7DQogICAgICAgIGZvbnQtZmFtaWx5OiAnTG9ic3Rlcic7DQogICAgICAgIGZvbnQtc2l6ZTogMTAwcHg7DQogICAgICAgIGZvbnQtd2VpZ2h0OjUwMDsNCiAgICAgICAgY29sb3I6ICNiYTA1MDU7DQogICAgfQ0KICAgIA0KICAgIC53ZWxjb21lLXRvIHsNCiAgICAgICAgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7DQogICAgICAgIGZvbnQtc2l6ZTogMjBweDsNCiAgICB9DQoNCiAgICAubHMtd2lkZSB7DQogICAgICAgIGxldHRlci1zcGFjaW5nOiAxZW07DQogICAgfQ0KDQogICAgLmZ1bGwtcCB7DQogICAgICAgIG1hcmdpbjogMDsNCiAgICAgICAgdG9wOiA0MCU7DQogICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgIH0NCg0KICAgIC5kZWNvIHsNCiAgICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgICBtYXJnaW46IDUlOw0KICAgICAgICBib3JkZXI6IDFweCBzb2xpZCBibGFjazsNCiAgICAgICAgd2lkdGg6IDkwJTsNCiAgICAgICAgaGVpZ2h0OiA5MCU7DQoNCiAgICB9DQoNCjwvc3R5bGU+DQo8Ym9keSBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogbGlnaHRncmF5Ij4NCg0KPGRpdiBjbGFzcz0iY29udGFpbmVyIj4NCiAgICA8ZGl2IGNsYXNzPSJkZWNvIj48L2Rpdj4NCiAgICA8cCBjbGFzcz0iZnVsbC1wIiA+DQogICAgICAgIDxzcGFuIGNsYXNzPSJ3ZWxjb21lLXRvIGxzLXdpZGUiPndlbGNvbWUgdDwvc3Bhbj48c3BhbiBjbGFzcz0id2VsY29tZS10byI+bzwvc3Bhbj4NCiAgICAgICAgPGJyLz4NCiAgICAgICAgPHNwYW4gc3R5bGU9InBhZGRpbmctdG9wOiAyNXB4OyIgY2xhc3M9Im5hbWUiPkphbnNzZW48L3NwYW4+DQogICAgICAgIDxici8+DQogICAgICAgIDxzcGFuIGNsYXNzPSJ3ZWxjb21lLXRvIiBzdHlsZT0icGFkZGluZy10b3A6IDI1cHg7Ij4mbWRhc2g7Jm1kYXNoOyZtZGFzaDsmbWRhc2g7byZtZGFzaDsmbWRhc2g7Jm1kYXNoOyZtZGFzaDs8L3NwYW4+DQogICAgPC9wPg0KPC9kaXY+DQoNCg0KPC9ib2R5Pg0KPC9odG1sPg=='
    ],
    'env' => 'LmVudg==$$IyBsb2NhbCBjb25maWd1cmF0aW9ucyBmaWxlDQojIHRoaXMgZmlsZSBpcyBub3QgaW50ZW5kZWQgdG8gYmUgdXBsb2FkZWQgdG8gdGhlIHJlcG8gc28gcGxlYXNlIGRvbid0IGRvIHRoYXQNCg0KIyB5b3UgY2FuIHB1dCBoZXJlIGFueSB2YXIgeW91IGNvbnNpZGVyIGltcG9ydGFudCB0byBrZWVwIHNhZmUgaW4geW91ciBsb2NhbCBjb25maWd1cmF0aW9ucw0KIyBidXQgcmVtZW1iZXIgdG8gcHV0IHRoYXQgdmFyIGluIHlvdXIgcHJvZHVjdGlvbiB2ZXJzaW9uIGFuZCBhdm9pZCB1c2Ugb2YgdGhpcyBlbnYgZmlsZQ0KIyBpbiBwcm9kdWN0aW9uIHN0YWdlDQoNClVSTCA9ICdodHRwOi8vbG9jYWxob3N0Jw0KDQpEQl9EUklWRVIgPSAnJw0KREJfSE9TVCA9ICcnDQpEQl9QT1JUID0gJycNCkRCX1VTRVIgPSAnJw0KREJfUEFTUyA9ICcnDQpEQl9OQU1FID0gJyc='
];

$base_path = __DIR__ . '/../';

if ($argc == 1)
    die(showArgumentList());

switch (strtolower($argv[1])){
    case 'init':

        foreach($files as $section=>$encfile){
            if(is_array($encfile)){
                foreach($encfile as $eencfile){
                    $parts = getParts($eencfile);		
                    putContents($parts);
                }
            }else{
                $parts = getParts($encfile);
                putContents($parts);	
            }
            
        }

    default:
        die(showArgumentList());

}

echo PHP_EOL . "done!" . PHP_EOL;

function getParts($encoded){
    $a = explode('$', $encoded, 3);
    $filename = base64_decode($a[0]);
    $path = base64_decode($a[1]);
    $content = base64_decode($a[2]);

    return compact('filename', 'path', 'content');
}

function putContents($parts){
	
	global $base_path, $DS;
	
    $d = createDir($base_path, $parts['path']);
	$intended_file = $d . $DS . $parts['filename'];
    file_put_contents($intended_file, $parts['content']);
	echo 'created ' . $intended_file . PHP_EOL;
}

function createDir($base_path, $new_path)
{
    global $DS;

    $parts = explode('/', $new_path);
    $cpart = '';
	//$intended_dir = $base_path;
    foreach($parts as $part){
		if(empty($part))
			continue;
        $cpart .= $DS . $part;
        if(!is_dir($base_path . $cpart))
            mkdir($base_path . $cpart);
    }
    return $base_path . $cpart;
}

function showArgumentList(){
    $ret = "Hey! You forgot to put the action you want to do!" . PHP_EOL . PHP_EOL .
    "What do you want to do? (use a command from the list)" . PHP_EOL .  PHP_EOL .
    "init: make scaffolding to start your app" . PHP_EOL;
    return $ret;
}

